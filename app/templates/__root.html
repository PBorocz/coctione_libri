<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>
      {% block title %}Coctione Libri{% endblock title %}
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Coctione Libri PDF Library">
    <meta name="author" content="Peter Borocz">

    {# FIXME #}
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}">

    {% block css %}
    {# Primary CSS framework #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/coctione_libri.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bulma-tooltip.min.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bulma-divider.min.css') }}"/>

    <style>
      .search_control_width {width: 500px; } /* We want to force the search bar a little wider than Bulma wants. */

      .field.is-horizontal .field-body .control {width: 50%; overflow: auto;}

      {% if caption %}
     {# Have to define this here for Jinja to pick up the environment! #}
     .watermark::after {content: "{{ watermark|title }}"; display: block; }
     {% endif %}

     {% block extra_css %}
     {# Any optional/page-specific css goes here. #}
     {% endblock %}

    </style>

    {% endblock %}

  </head>

  <body>
    <div class="watermark"></div>

    <section class="section">

      {% include "_navbar.html" %}

      {# include "_flask_messages.html" #}

      <main>
        {% block content %}
        {# CORE CONTENT GOES HERE! #}
        {% endblock %}
      </main>

      {% block footer %}
      {# Any optional footer go here. #}
      {% endblock %}

    </section>

    {# Le javascript: Keep at the end of the document for faster page load #}
    {% block javascript %}

      {# Setup our FontAwesome environment #}
      <script src="https://kit.fontawesome.com/4ab3aa20ca.js" crossorigin="anonymous"></script>

      {# htmx & hyperscript libraries #}
      <script defer src="https://unpkg.com/htmx.org@latest"></script> {# As of last update: 1.9.9 #}
      <script defer src="https://unpkg.com/hyperscript.org@latest"></script> {# As of last update: 0.9.11 #}

      {# navbar burger behaviour #}
      <script type="text/javascript">

       document.addEventListener('DOMContentLoaded', () => {

         // Get all "navbar-burger" elements
         const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

         // Check if there are any navbar burgers
         if ($navbarBurgers.length > 0) {

           // Add a click event on each of them
           $navbarBurgers.forEach( el => {
             el.addEventListener('click', () => {

               // Get the target from the "data-target" attribute
               const target = el.dataset.target;
               const $target = document.getElementById(target);

               // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
               el.classList.toggle('is-active');
               $target.classList.toggle('is-active');

             });
           });
         }

       });
      </script>

      {% block js_local %}
      {# Any page-specific JS can be populated here! #}
      {% endblock %}

      {% endblock %}

  </body>
</html>
